enum Opcode(fallthrough: bool, jump: bool, exception: bool) {
	NOP               (true, false, false),
	// Loads
	LOAD_CONST        (true, false, false),  // [0] index into the constant pool
	LOAD_GLOBAL       (true, false, true),   // [0] index into the string pool
	LOAD_LOCAL        (true, false, true),   // [0] index into the runtime locals
	LOAD_LOCAL_FAST   (true, false, false),  // [0] index into the runtime locals
	LOAD_FIELD        (true, false, true),   // [1] index into the string pool
	LOAD_NONLOCAL     (true, false, false),  // [1] index into the nonlocal variables
	// Stores
	STORE_GLOBAL      (true, false, false),  // [1] index into the string pool
	STORE_LOCAL       (true, false, false),  // [0] index into the runtime locals
	STORE_FIELD       (true, false, true),   // [2] index into the string pool
	// Control flow
	CALL              (true, false, true),   // [n] number of arguments (not including function!)
	JUMP              (false, true, false),  // [0] offset of pc
	JUMP_IF_FALSE     (true, true, false),   // [1] offset of pc
	JUMP_IF_TRUE_PEEK (true, true, false),   // [1] offset of pc
	JUMP_IF_FALSE_PEEK(true, true, false),   // [1] offset of pc
	// Exceptions
	RAISE             (false, false, true),  // [1]
	TRY               (true, false, false),  // [0] offset from this bytecode of the catch
	CATCH             (true, false, false),  // [0]
	ASSERT_FUNC       (true, false, true),   // [1]
	// Object creation
	CREATE_OBJECT     (true, false, true),   // [1]
	CREATE_CLASS      (true, false, true),   // [1] index into the classhole pool
	CREATE_LIST       (true, false, false),  // [1] how many elements to pull
	CREATE_FUNC       (true, false, false),  // [n] index into the funchole pool
	// Stack manipulation
	POP               (true, false, false),  // [1] how many values to pull
	DUPE              (true, false, false),  // index of element to dupe to top of stack (0 = top)
	SWAP              (true, false, false)   // index of element to swap top of stack with (0 = top)
}

/*
 * 00 NOP
 * 01 LOAD_CONST  
 * 02 LOAD_GLOBAL 
 * 03 LOAD_LOCAL  
 * 04 LOAD_LOCAL_FAST
 * 05 LOAD_FIELD  
 * 06 LOAD_NONLOCAL
 * 07 STORE_GLOBAL
 * 08 STORE_LOCAL 
 * 09 STORE_FIELD 
 * 0A CALL        
 * 0B JUMP        
 * 0C JUMP_IF_FALSE
 * 0D JUMP_IF_TRUE_PEEK
 * 0E JUMP_IF_FALSE_PEEK
 * 0F RAISE      
 * 10 TRY        
 * 11 CATCH      
 * 12 ASSERT_FUNC 
 * 13 CREATE_OBJECT
 * 14 CREATE_CLASS 
 * 15 CREATE_LIST  
 * 16 CREATE_FUNC  
 * 17 POP
 * 18 DUPE
 * 19 SWAP
 */

component Opcodes {
	def numOpcodes: int = 26;
	def map: Array<Opcode> = Array.new(numOpcodes); // XXX update this with the number of opcodes
}

def nothing() -> int {
	for (op in Opcode) {
		Opcodes.map[op.tag] = op;
	}
	return 1;
}
def nothing2 = nothing();

